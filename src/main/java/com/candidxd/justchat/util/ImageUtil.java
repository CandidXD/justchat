package com.candidxd.justchat.util;import sun.misc.BASE64Decoder;import java.io.FileOutputStream;import java.io.OutputStream;/** * @author yzk * @Title: ImageUtil * @ProjectName demo * @Description: 图片处理 * @date 2018/9/310:27 */public class ImageUtil {    /**     * base64 解码成图片     *     * @param base64 : base64     * @return boolean     * @author yzk     * @date 2018/9/3 10:29     */    public static String GenerateImage(String base64) {        //图像数据为空        if (base64 == null) {            return null;        }        BASE64Decoder decoder = new BASE64Decoder();        try {            //Base64解码            byte[] b = decoder.decodeBuffer(base64);            for (int i = 0; i < b.length; ++i) {                //调整异常数据                if (b[i] < 0) {                    b[i] += 256;                }            }            //生成jpeg图片            String relativePath = "scratch";            String path = FileUtil.getStaticPath(new ImageUtil()) + relativePath;            String os = System.getProperty("os.name");            if (!os.toLowerCase().startsWith("win")) {                path = "/" + path;            }            FileUtil.createDir(path);            String fileName = System.currentTimeMillis() + "" + (int) (Math.random() * 100000) + ".jpg";            //新生成的图片            String imgFilePath = path + "/" + fileName;            System.out.println(imgFilePath);            OutputStream out = new FileOutputStream(imgFilePath);            out.write(b);            out.flush();            out.close();            return relativePath + "/" + fileName;        } catch (Exception e) {            return null;        }    }}