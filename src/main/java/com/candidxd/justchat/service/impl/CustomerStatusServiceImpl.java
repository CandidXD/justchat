package com.candidxd.justchat.service.impl;import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import com.alibaba.fastjson.TypeReference;import com.candidxd.justchat.bean.CustomerStatus;import com.candidxd.justchat.dao.BaseDao;import com.candidxd.justchat.dao.CustomerStatusDao;import com.candidxd.justchat.redis.JedisUtil;import com.candidxd.justchat.service.CustomerStatusService;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.List;/** * @author yzk * @Title: CustomerServiceImpl * @ProjectName demo * @Description: TODO * @date 2018/8/2111:24 */@Servicepublic class CustomerStatusServiceImpl extends BaseServiceImpl<CustomerStatus> implements CustomerStatusService {    @Autowired    private JedisUtil jedisUtil;    @Autowired    private CustomerStatusDao customerStatusDao;    @Override    public Logger logger() {        return LoggerFactory.getLogger(CustomerStatusServiceImpl.class);    }    @Override    public BaseDao<CustomerStatus> getMainDao() {        return customerStatusDao;    }    @Override    public List<CustomerStatus> matching(CustomerStatus customerStatus) {        // List<CustomerStatus> list = new ArrayList<>();        // for (CustomerStatus bean:list()){        //     if (!bean.getCustomerUid().equals(customerStatus.getCustomerUid())&&bean.getStateId()==2){        //         list.add(bean);        //     }        // }        // return list;        return customerStatusDao.matching(customerStatus);    }    @Override    public void add(CustomerStatus customerStatus) {        super.add(customerStatus);        jedisUtil.set(this.getClass().getName() + customerStatus.getCustomerUid(), JSONObject.toJSONString(customerStatus));    }    @Override    public void update(CustomerStatus customerStatus) {        super.update(customerStatus);        jedisUtil.set(this.getClass().getName() + customerStatus.getCustomerUid(), JSONObject.toJSONString(customerStatus));    }    @Override    public CustomerStatus getOne(CustomerStatus customerStatus) {        CustomerStatus bean = JSON.parseObject(jedisUtil.get(this.getClass().getName() + customerStatus.getCustomerUid()), new TypeReference<CustomerStatus>() {        });        if (bean != null) {            return bean;        } else {            return customerStatusDao.getOne(customerStatus);        }    }}